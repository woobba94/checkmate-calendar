# Checkmate Calendar 반응형 디자인 적용 플랜

## 개요

현재 Checkmate Calendar는 데스크톱 전용으로 개발되어 있으며, 모바일 및 태블릿 환경에서의 사용성을 위해 반응형 디자인 적용이 필요합니다.

## 목표

- 모바일 퍼스트 접근법으로 전체 UI/UX 재설계
- 다양한 디바이스(모바일, 태블릿, 데스크톱)에서 최적화된 사용자 경험 제공
- 터치 인터페이스 최적화

## 브레이크포인트 정의

```scss
// Tailwind 기본 브레이크포인트 활용
- sm: 640px   // 작은 태블릿
- md: 768px   // 태블릿
- lg: 1024px  // 작은 데스크톱
- xl: 1280px  // 데스크톱
- 2xl: 1536px // 큰 데스크톱
```

## 디바이스별 레이아웃

### 모바일 (< 768px)

#### 헤더

- **왼쪽**: 햄버거 메뉴 버튼
  - 클릭 시 AppSidebar 전체 화면 오버레이로 표시
  - 햄버거 아이콘 ↔ X 아이콘 토글
- **중앙**: 동적 타이틀
  - 사이드바 열림: "캘린더 목록"
  - 사이드바 닫힘: "YYYY년 MM월"
- **오른쪽**: 캘린더 뷰 토글
  - "월별 보기" / "오늘 내일" 토글
  - 사이드바 열림 시 숨김

#### 사이드바

- 전체 화면 오버레이 형태
- 왼쪽에서 슬라이드 인 애니메이션
- 배경 dimmed overlay
- 닫기 버튼(X) 또는 배경 클릭으로 닫기

#### 메인 콘텐츠

- 캘린더: 100% width
- 에이전트 패널: 하단 고정
- 플로팅 버튼들 위치 조정

#### 에이전트 영역

- 기본 상태: 하단 고정 input bar
- Focus 상태:
  - 화면 하단 50% 차지
  - 캘린더는 상단 50%에 표시 (스크롤 가능)
  - Input이 textarea로 확장

#### 일정 상세/추가

- 캘린더 셀 클릭 시 하단에서 슬라이드업
- 해당 날짜의 일정 목록 표시
- 우하단 플로팅 + 버튼으로 일정 추가
- 에이전트 input 영역 가림

### 태블릿 (768px - 1024px)

#### 레이아웃

- 사이드바: 축소 가능한 형태 (기존 데스크톱과 유사)
- 캘린더: 중앙 영역
- 에이전트 패널: 우측 또는 하단 선택 가능

### 데스크톱 (> 1024px)

- 현재 레이아웃 유지
- 최소한의 조정만 적용

## 구현 계획

### Phase 1: 기초 구조 설정 (1-2일)

1. 반응형 유틸리티 클래스 설정
2. 미디어 쿼리 헬퍼 함수 작성
3. 브레이크포인트별 레이아웃 컴포넌트 생성

### Phase 2: 모바일 헤더 구현 (1일)

1. 햄버거 메뉴 컴포넌트 개발
2. 동적 타이틀 로직 구현
3. 뷰 토글 버튼 반응형 처리

### Phase 3: 사이드바 오버레이 구현 (2일)

1. 모바일 전용 사이드바 컴포넌트
2. 오버레이 및 애니메이션
3. 터치 제스처 지원 (스와이프로 닫기)

### Phase 4: 캘린더 반응형 처리 (3일)

1. 모바일 캘린더 뷰 최적화
2. 터치 이벤트 처리
3. 일정 표시 방식 개선
4. 캘린더 셀 클릭 인터랙션

### Phase 5: 에이전트 영역 구현 (2일)

1. 하단 고정 input bar
2. Focus 시 확장 애니메이션
3. 화면 분할 레이아웃

### Phase 6: 일정 상세 뷰 구현 (2일)

1. 하단 슬라이드업 패널
2. 일정 목록 표시
3. 플로팅 추가 버튼
4. 모달 대체 인터페이스

### Phase 7: 태블릿 최적화 (1일)

1. 중간 크기 화면 레이아웃
2. 사이드바/에이전트 패널 토글

### Phase 8: 테스트 및 최적화 (2일)

1. 다양한 디바이스 테스트
2. 성능 최적화
3. 접근성 개선

## 기술적 고려사항

### CSS/SCSS

```scss
// 모바일 우선 접근
.component {
  // 모바일 스타일 (기본)

  @media (min-width: 768px) {
    // 태블릿 스타일
  }

  @media (min-width: 1024px) {
    // 데스크톱 스타일
  }
}
```

### 컴포넌트 구조

- 반응형 Hook 생성: `useResponsive()`, `useBreakpoint()`
- 조건부 렌더링으로 디바이스별 컴포넌트 분리
- 터치/마우스 이벤트 통합 처리

### 상태 관리

- 모바일 전용 상태: `isMobileSidebarOpen`, `isAgentExpanded`, `selectedDateEvents`
- 디바이스 타입 감지 및 저장
- 뷰포트 크기 변경 감지

## 확정된 사양

### 1. 일정 추가/수정 플로우

- **바텀 시트 방식** (iOS 스타일)
- 하단에서 슬라이드업 애니메이션
- 스와이프 다운으로 닫기 지원

### 2. 네비게이션 패턴

- **월 이동**: 좌우 스와이프 제스처로 이전/다음 월 이동
- **오늘 버튼**: 현재 달이 아닌 경우에만 하단 중앙 플로팅 버튼 표시
  - 아이콘: "오늘" 텍스트 + target 아이콘
  - 현재 달인 경우 숨김

### 3. 에이전트 인터랙션

- **히스토리 표시**: 아래에서 위로 역순 표시 (최신 대화가 하단)
- **음성 입력**: 버튼 추가하되 disabled 상태
- **빠른 액션**: 추후 구현

### 4. 캘린더 뷰 - "오늘 내일"

- **칸반 보드 형태**: "오늘", "내일" 두 개의 열
- 시간대 구분 없이 일정 카드 리스트
- 일정 없을 시 "일정이 없습니다." 표시
- 프로토타이핑 필요

### 5. 제스처 인터랙션

- **일정 길게 누르기**: 옵션 메뉴 표시 (삭제, 수정)
- **스와이프**: 캘린더 월 이동, 바텀 시트 닫기

### 6. 성능 최적화

- 모바일에서 이벤트 렌더링 최적화
- 레이지 로딩 전략
- 오프라인 지원 (추후 구현)

### 7. 접근성

- 터치 타겟 크기 (최소 44x44px)
- 스크린 리더 지원
- 키보드 네비게이션

### 8. 바텀 시트 상세 동작

- **화면 차지 비율**: 70% 고정
- **키보드 동작**: 키보드 올라올 때 바텀 시트도 함께 상승
- **스와이프 다운으로 닫기**: 지원

### 9. 캘린더 셀 클릭 인터랙션

- **플로우**: 셀 클릭 → 일정 목록 패널 → 일정 클릭 → 수정 바텀 시트
- **빈 날짜**: 패널 표시 + "일정이 없습니다." + 우하단 일정 추가 플로팅 버튼
- **일정 목록 패널**: 하단에서 슬라이드업

## 확정된 사양 요약

### 모바일 레이아웃 (< 768px)

- **헤더**: 햄버거 메뉴 | 동적 타이틀 | 뷰 토글
- **사이드바**: 전체 화면 오버레이
- **캘린더**: 100% width, 색상 바로 일정 표시
- **에이전트**: 하단 고정, 확장 시 50% 차지
- **일정 목록 패널**: 70% 높이, 선택 주 1줄만 보임
- **바텀 시트**: 70% 높이, 일정 추가/수정
- **플로팅 버튼**: 조건부 표시, 에이전트 확장 시 숨김

## 구현 세부사항

### 1. 일정 목록 패널 (확정)

- **패널 높이**: 70% 고정
- **캘린더 표시**: 선택된 날짜가 포함된 주 1줄만 표시
- **에이전트와의 관계**: 패널 열릴 때 에이전트 input bar 숨김
- **스크롤**: 일정이 많을 때 패널 내부 스크롤

### 2. 바텀 시트 UI (확정)

- **헤더 디자인**:
  - 중앙: 기능명 (예: "새 일정", "일정 수정")
  - 우측: X 닫기 버튼
- **저장/취소 버튼**: 하단 고정
- **입력 필드**:
  - 제목 (필수)
  - 날짜/시간 선택기
  - 캘린더 선택 (여러 캘린더 중 선택)
  - 설명 (선택)
  - 반복 설정 (추후 구현)

### 3. 일정 표시 방식 (확정)

- **형태**: 색상 바 (32px × 6px)
- **배치 방식**: 세로 나열, gap 4px
- **오버플로우**: 셀 높이를 넘으면 hidden (한도 없이 쌓임)
- **월별 보기**: 색상 바만 표시
- **오늘 내일 뷰**: 전체 일정 정보 표시

### 4. 터치 제스처 (모두 구현)

- 캘린더 좌우 스와이프 (월 이동) - 필수
- 바텀 시트 스와이프 다운 (닫기) - 필수
- 일정 길게 누르기 (옵션 메뉴: 삭제, 수정)
- 사이드바 스와이프 (열기)
- 패널 스와이프 다운 (닫기)

### 5. 플로팅 버튼 정책 (확정)

- **에이전트 확장 시**: 모든 플로팅 버튼 숨김
- **플로팅 버튼 종류**:
  - 오늘 버튼 (하단 중앙) - 현재 달이 아닐 때만
  - 일정 추가 버튼 (우하단) - 일정 목록 패널에서만

### 6. 칸반 보드 (오늘 내일 뷰) (확정)

- **카드 정보**:
  - 시간 (있는 경우)
  - 제목
  - 캘린더 색상/이름
- **카드 인터랙션**:
  - 탭하면 바로 수정 바텀 시트 열기
  - 추가 기능 없음 (스와이프, 드래그 등)

## 추후 구현 예정

- 알림/노티피케이션
- 오프라인 모드
- PWA 지원
- 다크 모드 지원

## 기술 구현 디테일

### 반응형 Hook 예시

```tsx
// useResponsive.ts
export const useResponsive = () => {
  const [isMobile, setIsMobile] = useState(false);
  const [isTablet, setIsTablet] = useState(false);

  useEffect(() => {
    const checkDevice = () => {
      setIsMobile(window.innerWidth < 768);
      setIsTablet(window.innerWidth >= 768 && window.innerWidth < 1024);
    };

    checkDevice();
    window.addEventListener('resize', checkDevice);
    return () => window.removeEventListener('resize', checkDevice);
  }, []);

  return { isMobile, isTablet, isDesktop: !isMobile && !isTablet };
};
```

### 바텀 시트 컴포넌트 구조

```tsx
// BottomSheet.tsx
interface BottomSheetProps {
  isOpen: boolean;
  onClose: () => void;
  height?: '70%' | '90%' | 'full';
  swipeToClose?: boolean;
  children: React.ReactNode;
}
```

### 칸반 보드 뷰 구조

```tsx
// TodayTomorrowView.tsx
interface EventCard {
  id: string;
  title: string;
  time?: string;
  calendarColor: string;
  calendarName?: string;
}

interface Column {
  title: '오늘' | '내일';
  date: Date;
  events: EventCard[];
}
```

### 일정 목록 패널 구조

```tsx
// DateEventsPanel.tsx
interface DateEventsPanelProps {
  isOpen: boolean;
  date: Date;
  events: CalendarEvent[];
  onClose: () => void;
  onEventClick: (event: CalendarEvent) => void;
  onAddClick: () => void;
  calendarWeekView: React.ReactNode; // 선택 주 1줄 캘린더
}
```

### 색상 바 컴포넌트 구조

```tsx
// EventColorBar.tsx
interface EventColorBarProps {
  color: string;
  width?: number; // 기본 32px
  height?: number; // 기본 6px
}

// 캘린더 셀 내부 스타일
.calendar-cell-events {
  display: flex;
  flex-direction: column;
  gap: 4px;
  overflow: hidden;
  height: 100%;
}
```

## 다음 단계

### 즉시 구현 가능한 작업

1. **반응형 Hook 개발**: useResponsive, useBreakpoint
2. **색상 바 컴포넌트**: EventColorBar 컴포넌트 및 스타일
3. **모바일 헤더 수정**: 조건부 렌더링으로 모바일 레이아웃

### 주요 개발 우선순위

1. **Phase 1**: 기본 반응형 구조 (Hook, 브레이크포인트)
2. **Phase 2**: 모바일 헤더와 사이드바 오버레이
3. **Phase 3**: 일정 목록 패널과 바텀 시트
4. **Phase 4**: 터치 제스처와 애니메이션
5. **Phase 5**: 칸반 보드 뷰 (오늘 내일)

### 테스트 전략

- Chrome DevTools 모바일 시뮬레이터
- 실제 디바이스 테스트 (iOS, Android)
- 터치 제스처 호환성 확인
- 성능 프로파일링

## 참고 자료

- Material Design 3 가이드라인
- iOS Human Interface Guidelines
- 반응형 웹 디자인 베스트 프랙티스
